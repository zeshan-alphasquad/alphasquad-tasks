var express = require('express')
var app = express()

var resourceMonitorMiddleware = require('./index.js').resourceMonitorMiddleware
var resourceMonitorMiddlewareCB = require('./index.js').resourceMonitorMiddlewareCB

// example without callback function
app.use(resourceMonitorMiddleware)


// example with callback function
app.use(function(req, res, next){
  resourceMonitorMiddlewareCB(req, res, next, function(diffJson){
    console.log(' diffJson : ', diffJson)
  })
})



app.get('/', function (req, res) {
  res.send('Hello World!')
})

app.get('/:id', function (req, res) {
  res.send('World ID:' + req.params.id)
})


var port = 3004
app.listen(port, function () {
  console.log('Example app listening on port ' +port+ '!')
})
